!function(e){"function"==typeof define&&define.amd?define(["background/storage","logger","content/elementWrap"],e):"object"==typeof exports&&(module.exports=e(require("background/storage"),require("logger"),require("content/elementWrap")))}(function(r,e,t){var n={save:o,load:a,setup:function(){e.all("setup"),o(),n.load()}};function o(){var e={name:t.serverName.get(),port:t.serverPort.get()};r.set({server:e});r.set({options:{}})}function s(e,r,t){r&&(e.set(r),(e=e())&&(e.disabled=t))}function a(){e.all("load options (server)"),r.get("server").then(function(e){e.server&&(s(t.serverName,e.server.name,e.server.managed),s(t.serverPort,e.server.port,e.server.managed))})}return t.initialise(["save","serverName","serverPort","options"]),r.listen(function(e){e&&e.server&&a()}),n});