!function(e){"function"==typeof define&&define.amd?define(["models/webdata","models/windows","models/tabs","background/websocket","background/messaging","background/messageQueue"],e):"object"==typeof exports&&(module.exports=e(require("models/webdata"),require("models/windows"),require("models/tabs"),require("background/websocket"),require("background/messaging"),require("background/messageQueue")))}(function(t,a,d,e,n,s){return{listen:function(){chrome.runtime.sendMessage({windowFocusChanged:!0}),chrome.runtime.onMessage.addListener(function(e,n,s){1==e.windowFocusChangedResponse&&a.focus(e.id)}),chrome.runtime.sendMessage({tabOnUpdatedEvent:!0}),chrome.runtime.onMessage.addListener(function(e,n,s){1==e.tabOnUpdatedEventResponse&&d.events.update(e.data.tabid,e.data.changeinfo,e.data.tab)}),chrome.runtime.sendMessage({tabOnActivatedEvent:!0}),chrome.runtime.onMessage.addListener(function(e,n,s){1==e.tabOnActivatedEventResponse&&d.events.activate(e.data)}),chrome.runtime.sendMessage({tabOnRemovedEvent:!0}),chrome.runtime.onMessage.addListener(function(e,n,s){1==e.tabOnRemovedEventResponse&&d.events.remove(e.data.tabid)}),chrome.runtime.sendMessage({tabOnReplacedEvent:!0}),chrome.runtime.onMessage.addListener(function(e,n,s){1==e.tabOnReplacedEventResponse&&d.events.replace(e.data.addedTabId,e.data.removedTabId)}),chrome.runtime.onMessage.addListener(n.receive),chrome.runtime.sendMessage({onSuspendPersistEvent:!0}),chrome.runtime.onMessage.addListener(function(e,n,s){1==e.onSuspendPersistEventResponse&&t.persist()}),s.register(e.queued)}}});