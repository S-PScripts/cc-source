!function(e){"function"==typeof define&&define.amd?define(["lib/queue","background/storage","background/observers"],e):"object"==typeof exports&&(module.exports=e(require("lib/queue"),require("background/storage"),require("background/observers")))}(function(n,e,r){var u="hp_queue",t="s_queue";function o(u){this.enqueue=function(e){n.queue.prototype.enqueue.call(this,e),u&&r.publish(u)}}n.queue.prototype.raw=function(){return this.a};var i=new n.queue;o.call(i,u);var s=new n.queue;return o.call(s),{standard:s,priority:i,persist:function(){e.set({hp_queue:i.raw(),s_queue:s.raw()})},register:function(e){r.subscribe(u,e)},load:function(e){e.hp_queue&&e.hp_queue.length&&(i=new o(u),e.hp_queue.map(function(e){i.enqueue(e)})),e.s_queue&&e.s_queue.length&&(s=new o,e.hp_queue.map(function(e){s.enqueue(e)}))},notify:function(){r.publish(u),r.publish(t)}}});