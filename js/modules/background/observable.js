define(["modules/document","jquery"],function(o,g){function v(){if(!this.targets)return!1;for(var e=0;e<this.targets.length;e++){var t=this.targets[e];!t||(t=g(t))&&t.val(this.currentValue)}}function c(){if(!this.targets)return!1;for(var e=0;e<this.targets.length;e++){var t=this.targets[e];t&&(this.currentValue?g(t).removeAttr("disabled"):g(t).attr("disabled","disabled"))}}function f(){if(!this.targets)return!1;for(var e=0;e<this.targets.length;e++){var t=this.targets[e];t&&(this.previousValue&&t.classList.contains(this.previousValue)&&t.classList.remove(this.previousValue),t.classList.add(this.currentValue))}}function b(){if(!this.targets)return!1;for(var e=0;e<this.targets.length;e++){var t=this.targets[e];t&&(t.title=this.currentValue)}}function p(e){e=e.data;e.model(g(e.targetElement).val())}return{observable:function(e){function t(e){switch(arguments.length){case 0:return t.currentValue;case 1:t.previousValue=t.currentValue,t.currentValue=e,t.onChanged&&o.dispatchEvent(t.onChanged)}}return t.onChanged=void 0,t.targets=[],t.currentValue=e,t.previousValue=void 0,t},applyBindings:function(e){if(e.__bound__)return!1;for(var t,n,a=o.body.querySelectorAll("[data-bind]"),r=0;r<a.length;r++){var s=a[r],i=g(s).data("bind");if(i){var u=i.replace(/: +/,":").split(" ");if(u&&0<u.length)for(var l=0;l<u.length;l++){var d,h=u[l].split(":");if(h&&2==h.length)switch(h[0]){case"value":t=h[1],e&&e[t]&&((n=e[t]).onChanged=new Event(t),o.addEventListener(t,v.bind(n)),d=n(),n.targets.push(s),g(s).val(d),g(s).change({model:n,targetElement:s},p));break;case"enable":t=h[1],e&&e[t]&&((n=e[t]).onChanged=new Event(t),n.targets.push(s),o.addEventListener(t,c.bind(n)));break;case"class":t=h[1],e&&e[t]&&((n=e[t]).onChanged=new Event(t),n.targets.push(s),o.addEventListener(t,f.bind(n)));break;case"title":t=h[1],e&&e[t]&&((n=e[t]).onChanged=new Event(t),n.targets.push(s),o.addEventListener(t,b.bind(n)))}}}}e.__bound__=!0}}});