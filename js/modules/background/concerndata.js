!function(e){"function"==typeof define&&define.amd?define("background/concerndata",["background/storage"],e):"object"==typeof exports&&(module.exports=e(require("background/storage")))}(function(n){var r,o=null,a={info:"You can use this to report or share a concern with a member of staff at the school. Anything you share here will be treated in the strictest confidence. Enter the details of your concern below with any relevant information and then select the member of staff from the box at the bottom who your concern will be shared with."};return{getContacts:function(){return new Promise(function(r,e){chrome.runtime.sendMessage({getEsafetyContacts:!0}),chrome.runtime.onMessage.addListener(function(e,t,n){1==e.esafetyContactsResponse&&e.data&&r(e.data)})})},configure:function(e,t){e.hasOwnProperty("EnableReportAConcern")&&"1"==e.EnableReportAConcern?(n.remove("ConcernText"),localStorage.isReportConcernEnabled=!0):localStorage.isReportConcernEnabled=!1,e.contacts&&(r=e.contacts,n.set({esafetyContacts:JSON.stringify(r)})),e.dialogtext&&(a.info=e.dialogtext,n.set({ConcernText:a})),t&&chrome.runtime.sendMessage({queryTabs:!0,tabData:{active:!0}},e=>{var t,n=!1;for(t of e)if(t.url===chrome.runtime.getURL("reportconcern.html")){n=!0,chrome.runtime.sendMessage({updateWithPhotos:!0});break}n||(null==o||o+6e3<(new Date).getTime())&&(o=(new Date).getTime(),chrome.runtime.sendMessage({displayGetInfo:!0},function(e){var{width:t,height:e}=e[0].bounds;localStorage.displayWidth=t,localStorage.displayHeight=e;let n=parseInt(.9*t),r=parseInt(e);1920<=t&&1080<=e?(n=parseInt(.5*t),r=parseInt(.71*e)):1680<=t&&1050<=e?(n=parseInt(.5*t),r=parseInt(.7*e)):1600<=t&&900<=e?(n=parseInt(.65*t),r=parseInt(.81*e)):1440<=t&&900<=e?(n=parseInt(.7*t),r=parseInt(.82*e)):1400<=t&&1050<=e?(n=parseInt(.7*t),r=parseInt(.7*e)):1366<=t&&768<=e?(n=parseInt(.8*t),r=parseInt(.92*e)):1360<=t&&768<=e?(n=parseInt(.92*t),r=parseInt(.92*e)):1280<=t&&1024<=e?(n=parseInt(.85*t),r=parseInt(.69*e)):1280<=t&&960<=e?(n=parseInt(.8*t),r=parseInt(.74*e)):1280<=t&&800<=e&&(n=parseInt(.85*t),r=parseInt(.88*e)),localStorage.reportConcernWidth=n,localStorage.reportConcernHeight=r,function(e,t,n,r){e=parseInt((e-n)/2),t=parseInt((t-r)/4);chrome.runtime.sendMessage({createWindow:!0,windowData:{url:"reportconcern.html",focused:!0,type:"popup",width:n,height:r,left:e,top:t}},function(e){e.id})}(t,e,n,r)}))})},getText:function(){return new Promise(function(t,e){chrome.runtime.sendMessage({getLocal:!0,data:"ConcernText"},function(e){e.ConcernText&&t(e.ConcernText)})})}}});