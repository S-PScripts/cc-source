!function(e){"function"==typeof define&&define.amd?define(["background/tabActions","models/useridentity"],e):"object"==typeof exports&&(module.exports=e(require("background/tabActions"),require("models/useridentity")))}(function(t,r){function o(i,e){var r=document.createElement("canvas");return r.width=i.width,r.height=i.height,t.capture(e).then(n).then(function(e){var t,n=r.getContext("2d");return n.clearRect(0,0,i.width,i.height),n.drawImage(e,0,0,i.width,i.height),t=r,new Promise(function(e){e(t.toDataURL())})})}function n(n){return new Promise(function(e){var t=document.createElement("img");t.onload=function(){e(this)},t.src=n})}return{getThumbnail:o,internet:function(n,i){return new Promise(function(t,e){o(i).then(function(e){t({explorer:{thumbnails:[{consoleid:n,user:r.get().user,userdomain:"Chrome",thumbnail:e}]}})})})}}});