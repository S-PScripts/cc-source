!function(e){"function"==typeof define&&define.amd?define(["modules/events","background/storage","background/storage-managed"],e):"object"==typeof exports&&(module.exports=e(require("modules/events","background/storage","background/storage-managed")))}(function(e,n,o){return{startListeners:function(){function u(n){require(["logger"],function(e){e.setup({level:n})})}e.listen(),n.listen(function(n,e){"managed"==e&&o.change(n),n&&n.debug&&n.debug.newValue&&((e=n.debug.newValue.loglevel)&&u(e),n.debug.newValue.enabled&&require(["debug/tools"],function(e){e.debug(n.debug.newValue.enabled)}))}),n.get("debug").then(function(e){e.debug&&e.debug.loglevel&&u(e.debug.loglevel)})}}});