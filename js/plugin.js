!function(e){"function"==typeof define&&define.amd?define(["modules/document"],e):"object"==typeof exports&&(module.exports=e(require("modules/document")))}(function(s){return class{constructor(){}static webStart(e,t,s){this.isAcceptableChars(t)||(t=e);t=this.build({id:2,cmd:1},"dssd",[s,e,t,0]);this.sendAsync("sendWebStart",t)}static webClose(e,t,s){this.isAcceptableChars(t)||(t=e);t=this.build({id:2,cmd:2},"dss",[s,e,t]);this.sendAsync("sendWebClose",t)}static appStart(e){e=this.build({id:1,cmd:1},"dds",[e,e,"chrome.exe"]);this.sendAsync("sendAppStart",e)}static appClose(e){e=this.build({id:1,cmd:2},"dd",[e,e]);this.sendAsync("sendAppClose",e)}static appChange(e,t,s){var i=s;this.isAcceptableChars(t)||(t=e);t=this.build({id:1,cmd:4},"dds",[i,s,t]);this.sendAsync("sendAppChange",t)}static appActivate(e){e=this.build({id:1,cmd:3},"dd",[e,e]);this.sendAsync("sendAppActivate",e)}static sendAsync(e,t){t=new CustomEvent("pluginEvent",{detail:{key:e,value:t}});s.dispatchEvent(t)}static isAcceptableChars(e){var t,s;for(s in e)if(t=255<Math.max(e.charCodeAt(s)))break;return!t}static build(e,t,s){const i=0,d=1,n=2,a=3,r=4,c=5,o=6;if(e.id){for(var h,l=String.fromCharCode(0),p=l+l,u=p+p,C=t+l+String.fromCharCode(e.cmd,0,0,0),m=0;m<t.length;++m)switch(t[m]){case"d":C+=String.fromCharCode(4,0,0,0)+String.fromCharCode(255&s[m],s[m]>>>8&255,s[m]>>>16&255,0);break;case"s":h=s[m].length+1,C+=String.fromCharCode(255&h,h>>>8&255,h>>>16&255,0)+s[m]+l;break;case"p":C+=u}var A=(C+=u).length,f=new ArrayBuffer(32),p=new Uint32Array(f,4,7);return new Uint16Array(f,2,1)[0]=150,p[i]=e.id,p[d]=3,p[n]=7,p[a]=e.cmd,p[r]=A,p[c]=0,p[o]=A,[String.fromCharCode.apply(null,new Uint8Array(f.slice(2,30)))].join("")+C}}}});