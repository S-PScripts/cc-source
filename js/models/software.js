define(["background/storage"],function(r){var t;(new o).then(function(i){return new Promise(function(n,e){n(t=i)})}).then(e).then(function(n){r&&r.set({software:n})});function e(o){return new Promise(function(t,n){chrome.runtime.sendMessage({getAll:!0},function(n){for(r&&r.set({software:n}),i=0;i<n.length;i++){var e={id:n[i].id,appLaunchURL:n[i].appLaunchURL,description:n[i].description,enabled:n[i].enabled,homepageUrl:n[i].homepageUrl,icons:n[i].icons,installType:n[i].installType,launchType:n[i].launchType,name:n[i].name,optionsUrl:n[i].optionsUrl,shortName:n[i].shortName,type:n[i].type,version:n[i].version,versionName:n[i].versionName};o.push(e)}t(o)})})}function o(){return new Promise(function(n,e){n([])})}return{software:function(){return new Promise(function(n){n(new Promise(function(n){(new o).then(function(i){return new Promise(function(n,e){n(t=i)})}).then(e).then(function(i){return new Promise(function(n,e){r&&r.set({software:i}),n()}).then(n(t))})}))})}}});