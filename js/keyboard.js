var NSLibrary=NSLibrary||{};NSLibrary.Client=NSLibrary.Client||{},NSLibrary.Client.Keyboard=NSLibrary.Client.Keyboard||{},function(n){n.shiftStatus=!1,n.ctrlStatus=!1,n.altStatus=!1,n.altGRStatus=!1,n.numLockStatus=!1,n.capsLockStatus=!1,n.scanCodes=void 0,n.modifiers={SHIFT:function(){n.shiftStatus=!0},CTRL:function(){n.ctrlStatus=!0},ALT:function(){n.altStatus=!0},ALTGR:function(){n.altGRStatus=!0},BACKSPACE:function(){chrome.runtime.sendMessage({executeScript:!0,scriptData:{code:"oField = document.activeElement;  var iCaretPos = oField.selectionStart; oField.value = oField.value.substring(0,iCaretPos-1) + oField.value.substring(iCaretPos); oField.selectionStart = iCaretPos-1;oField.selectionEnd = iCaretPos-1;"}})},DELETE:function(){chrome.runtime.sendMessage({executeScript:!0,scriptData:{code:"oField = document.activeElement;  var iCaretPos = oField.selectionStart; oField.value = oField.value.substring(0,iCaretPos) + oField.value.substring(iCaretPos+1); oField.selectionStart = iCaretPos;oField.selectionEnd = iCaretPos;"}})},CAPSLOCK:function(){n.capsLockStatus=!n.capsLockStatus},NUMLOCK:function(){n.numLockStatus=!0}},n.languageMap={"en-gb":"en","en-us":"us"},n.languageMap[navigator.language.toLowerCase()],n.sendScanCode=function(t,e){var a=n.getKey(t);void 0===a&&void 0===n.scanCodes.special[t]||(void 0===n.scanCodes.special[t]?chrome.runtime.sendMessage({executeScript:!0,scriptData:{code:"var textEvent = document.createEvent('TextEvent');textEvent.initTextEvent('textInput', true, true, null, '"+a+"', 1, 'en-US');document.body.dispatchEvent(textEvent);"}}):n.modifiers[n.scanCodes.special[t]].call())},n.getKey=function(t){n.altStatus?t+=2e3:!n.capsLockStatus&&n.shiftStatus&&(t+=1e3);var e=n.scanCodes[t];return n.capsLockStatus&&!n.shiftStatus&&"a"<=e&&e<="z"&&(e=n.scanCodes[t+1e3]),e=n.capsLockStatus&&n.shiftStatus&&"0"<=e&&e<="9"?n.scanCodes[t+1e3]:e},n.sendAscii=function(t){chrome.runtime.sendMessage({executeScript:!0,scriptData:{code:"var textEvent = document.createEvent('TextEvent');textEvent.initTextEvent('textInput', true, true, null, '"+String.fromCharCode(t)+"', 1, 'en-US');document.body.dispatchEvent(textEvent);"}})}}(NSLibrary.Client.Keyboard);