function persist(){windows.persistence.save(),tab.persistence.save()}chrome.runtime.onMessage.addListener(function(e,n,t){1==e.minimize&&chrome.windows.update(parseInt(n.tab.windowId),{state:"minimized"})}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.visibilityChange&&chrome.storage.local.get(["showingShareScreen"],function(e){1==e.showingShareScreen&&chrome.windows.update(n.tab.windowId,{focused:!0})})}),this.setTimeout(function(){createOffscreenDocument()},1e3),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getManifest&&t(chrome.runtime.getManifest()),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.updateTeacherName&&chrome.storage.sync.set({teacherName:e.textToDisplay}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.createCanvas&&chrome.runtime.sendMessage({createCanvasHelper:!0}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.minimizeVideoScreen&&chrome.windows.update(n.tab.windowId,{state:"minimized"})}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.storageOnChanged&&chrome.storage.onChanged.addListener(function(e,n){chrome.runtime.sendMessage({storageOnChangedResponse:!0,data:{changes:e,location:n}}),chrome.runtime.sendMessage({storageOnChangeDeviceDetailsChangeResponse:!0,data:{changes:e,location:n}}),chrome.runtime.sendMessage({storageOnChangeTimezoneChangeResponse:!0,data:{changes:e,location:n}})}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.observerChanges&&chrome.storage.onChanged.addListener(options.listenToChange),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.storageOnChanged&&chrome.storage.onChanged.addListener(function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.onStateChanged&&chrome.idle.onStateChanged.addListener(function(){t()}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getWhichStorage&&chrome.storage[e.area].get(e.key,function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.cancelChooseDesktopMedia&&chrome.desktopCapture.cancelChooseDesktopMedia(e.previous),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.getProfileUserInfo&&(chrome.identity?chrome.identity.getProfileUserInfo(function(e){e?chrome.runtime.sendMessage({getProfileUserInfoResponse:!0,email:e.email}):chrome.runtime.sendMessage({getProfileUserInfoResponse:!0,email:null})}):chrome.runtime.sendMessage({getProfileUserInfoResponse:!0,email:null}))}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.storeLocal&&chrome.storage.local.set(e.data,function(){t(!0)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getDisplay&&chrome.system.display.getInfo(function(e){e&&t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getAll&&chrome.management.getAll(function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.windowOnFocusChanged&&chrome.windows.onFocusChanged.addListener(function(){chrome.runtime.sendMessage({windowOnFocusChangedResponse:!0})}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getNetworkType&&chrome.storage.local.get(["networkType"],function(e){t({networkType:e.networkType})}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.queryTabs&&chrome.tabs.query(e.tabData,function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getWindowCurrent&&chrome.windows.getCurrent(function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getTabCurrent&&chrome.tabs.getCurrent(function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getTab&&chrome.tabs.get(e.tabID,function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.historySearch&&chrome.history.search(e.data,function(e){t(e)})}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.deleteUrl&&chrome.history.deleteUrl({url:e.url},function(){t()}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getWindow&&chrome.windows.get(e.windowId,e.data,function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.createWindow&&chrome.windows.create(e.windowData,function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.getAvailableCapacity&&chrome.system.storage.getAvailableCapacity&&chrome.system.storage.getAvailableCapacity(e.id,function(e){chrome.runtime.sendMessage({getAvailableCapacityResult:!0,id:e.id,availableCapacity:e.availableCapacity})})}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.downloadlog&&chrome.downloads.download({url:e.url,filename:"log_"+(new Date).toISOString().replaceAll(":","_").replaceAll("-","_").replace(".","_")+".txt"}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.windowsUpdate&&e.windowId&&chrome.windows.update(e.windowId,e.winData),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getLocal&&chrome.storage.local.get(e.data,function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getEsafetyContacts&&chrome.storage.local.get("esafetyContacts",function(e){chrome.runtime.sendMessage({esafetyContactsResponse:!0,data:e.esafetyContacts})}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.storeSync&&chrome.storage.sync.set(e.data),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getLocale&&("nb"==window.navigator.language&&t("no"),"en"==window.navigator.language.substr(0,2)&&t("en"),t("-","_")),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getSync&&chrome.storage.sync.get(e.data,function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.tabsUpdate&&chrome.tabs.update(e.tabID,e.tabData),!1}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.createTab&&chrome.tabs.create({url:e.tabData.url},function(e){t(e?{retreiveTabID:!0,tab:e}:{retreiveTabID:!0,tab:null})}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.reloadTab&&chrome.tabs.reload(e.tabID),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.tabOnUpdated&&chrome.tabs.onUpdated.addListener(function(e,n,t){chrome.runtime.sendMessage({tabOnUpdatedResponse:!0,data:{tabid:e,changeinfo:n,tab:t}})})}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.tabOnUpdatedEvent&&chrome.tabs.onUpdated.addListener(function(e,n,t){chrome.runtime.sendMessage({tabOnUpdatedEventResponse:!0,data:{tabid:e,changeinfo:n,tab:t}})})}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.tabOnActivated&&chrome.tabs.onActivated.addListener(function(e){chrome.runtime.sendMessage({tabOnActivatedResponse:!0,data:e})})}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.tabOnActivatedEvent&&chrome.tabs.onActivated.addListener(function(e){chrome.runtime.sendMessage({tabOnActivatedEventResponse:!0,data:e})})}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.clearId&&chrome.tabs.onRemoved.addListener(function(e,n){chrome.runtime.sendMessage({clearIdResponse:!0,tabid:e,removeInfo:n})})}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.tabOnRemovedEvent&&chrome.tabs.onRemoved.addListener(function(e,n){chrome.runtime.sendMessage({tabOnRemovedEventResponse:!0,data:{tabid:e,removeInfo:n}})})}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.tabOnReplaced&&chrome.tabs.onReplaced.addListener(function(e,n){chrome.runtime.sendMessage({tabOnReplacedResponse:!0,data:{addedTabId:e,removedTabId:n}})})}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.tabOnReplacedEvent&&chrome.tabs.onReplaced.addListener(function(e,n){chrome.runtime.sendMessage({tabOnReplacedEventResponse:!0,data:{addedTabId:e,removedTabId:n}})})}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.onSuspendPersistEvent&&chrome.runtime.sendMessage({onSuspendPersistEventResponse:!0})}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.executeScript&&chrome.tabs.executeScript(null,e.scriptData),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.windowsGetAll&&chrome.windows.getAll(e.winData,function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.windowsGetAllForUAP&&chrome.windows.getAll(e.winData,function(e){chrome.runtime.sendMessage({windowsGetAllForUAPResponse:!0,winData:e})}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getCPUInfo&&chrome.system.cpu.getInfo(function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getOptions&&(chrome.storage.managed?chrome.storage.managed.get(["options"],function(e){e&&e.options?t(e.options):t(void 0)}):t(void 0)),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getOptionsManagedAccountsandSite&&(chrome.storage.managed?chrome.storage.managed.get(["options"],function(e){e&&e.options?(chrome.storage.sync.set({IsManaged:!0}),chrome.runtime.sendMessage({getOptionsManagedAccountsandSiteResponse:!0,isManaged:!0,store:e})):(chrome.storage.sync.set({IsManaged:!1}),chrome.runtime.sendMessage({getOptionsManagedAccountsandSiteResponse:!0,isManaged:!1}))}):(chrome.storage.sync.set({IsManaged:!1}),chrome.runtime.sendMessage({getOptionsManagedAccountsandSiteResponse:!0,isManaged:!1}))),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.systemStorage&&chrome.system.storage.getInfo(function(e){t(e)}),!0}),chrome.runtime.onSuspend.addListener(persist),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getMemoryInfo&&chrome.system.memory.getInfo(function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.storeGatewayAddressAndPortAndRoomSpec&&chrome.storage.local.set({gatewayAddress:e.gatewayAddress,port:e.port,roomSpec:e.roomspec,cloudState:e.cloudState}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.updateConnectionState&&chrome.storage.local.set({connectionState:e.connectionState}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.requestKeepAwake&&e.powerMode&&chrome.power.requestKeepAwake(e.powerMode),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.isHangupCalled&&chrome.storage.local.set({isHangupCalled:e.hangupCalled}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.allowAvailableStatusAction&&chrome.storage.local.set({allowAvailableStatusAction:!0})}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.updateTitle&&chrome.action.setTitle({title:e.title})}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getConnectionState&&chrome.storage.local.get("connectionState",function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.updateCloudstate&&chrome.storage.local.set({cloudState:e.cloudstate}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.setIcon&&chrome.action.setIcon({path:e.iconPath}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.windowFocusChanged&&chrome.windows.onFocusChanged.addListener(function(e){chrome.runtime.sendMessage({windowFocusChangedResponse:!0,id:e})})}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getDisplay&&chrome.system.display.getInfo(function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.loadKey&&chrome.storage.local.get(e.key,function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.isManaged&&(chrome.storage.managed?t(!0):t(!1)),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.updateBatteryCharging&&chrome.storage.local.set({batteryCharging:e.batteryCharging}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.focusChat&&chrome.windows.update(n.tab.windowId,{state:"maximized"}),!1}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.updateBatteryLevel&&chrome.storage.local.set({batteryLevel:e.batteryLevel}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getBatteryInfo&&chrome.storage.local.get(["batteryCharging","batteryLevel"],function(e){t({batteryCharging:e.batteryCharging,batteryLevel:e.batteryLevel})}),!0});var stream,prevCall=0;function createOffscreenDocument(){chrome.offscreen.createDocument({url:"offscreendocument.html",reasons:["LOCAL_STORAGE"],justification:"To access local storage"})}function createDesktopCaputreScreen(){chrome.windows.create({url:"desktopCapture.html",focused:!0,type:"popup",width:628,height:460},function(e){})}chrome.runtime.onMessage.addListener(function(e,n,t){return 1!=e.captureVisibleTab||500<=(e=(new Date).getTime())-prevCall&&(prevCall=e,chrome.tabs.captureVisibleTab().then(function(e){chrome.runtime.sendMessage({captureVisibleTabThumbnails:!0,img:e})})),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.captureVisibleTabPhraseMatching&&chrome.tabs.captureVisibleTab().then(function(e){chrome.runtime.sendMessage({captureVisibleTabPhraseMatchingResponse:!0,img:e})}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.displayGetInfo&&chrome.system.display.getInfo(function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.queryTabsUnmuteAll&&chrome.tabs.query({},function(e){for(var n=0;n<e.length;++n)chrome.tabs.update(e[n].id,{muted:!1})}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.updateMuteSound&&chrome.storage.local.set({muteSound:e.muteSound}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.IsManaged&&chrome.storage.sync.get(["IsManaged"],function(e){t({isManaged:e.IsManaged,manifest:chrome.runtime.getManifest()})}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.IsManagedFromSupportTool&&chrome.storage.sync.get(["IsManaged"],function(e){chrome.runtime.sendMessage({IsManagedFromSupportToolResponse:!0,isManaged:e.IsManaged})}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.deviceIsRegistered&&chrome.storage.sync.set({deviceIsRegistered:e.isRegistered}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.removeWindow&&chrome.windows.remove(e.windowId),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.removeFromSync&&(chrome.storage.sync.remove(e.data),t()),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.removeFromLocal&&(chrome.storage.local.remove(e.data),t()),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.removeTab&&chrome.tabs.remove(e.tabID),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.disablefulldesktopview&&chrome.storage.local.set({disablefulldesktopview:e.disablefulldesktop}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.updateNetworkType&&chrome.storage.local.set({networkType:e.networkType}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.storageSync&&chrome.storage.sync.get(["deviceIsRegistered","IsManaged"],function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.storageSyncKey&&null!=e.key&&chrome.storage.sync.get(e.key,function(e){t(e)}),!0}),chrome.runtime.onMessage.addListener(function(e,n,t){return 1==e.getPlatformInfo&&chrome.runtime.getPlatformInfo(function(e){e&&"cros"==e.os?chrome.runtime.sendMessage({getPlatformInfoResponse:!0}):(chrome.action.disable(),chrome.management.uninstallSelf())}),!0}),chrome.runtime.onStartup.addListener(function(){}),chrome.runtime.onMessage.addListener((e,n,t)=>{1==e.createDesktopCaputreScreen&&chrome.tabs.query({url:chrome.runtime.getURL("desktopCapture.html")},function(e){0==e.length&&createDesktopCaputreScreen()})}),chrome.runtime.onMessage.addListener((e,n,t)=>{1==e.isDesktopCaptureOpen&&chrome.tabs.query({url:chrome.runtime.getURL("desktopCapture.html")},function(e){0==e.length?chrome.runtime.sendMessage({updateIsDesktopCaptureOpen:!0,result:!1}):chrome.runtime.sendMessage({updateIsDesktopCaptureOpen:!0,result:!0})})});var _previous=void 0;const request={sources:["screen"]};chrome.runtime.onConnect.addListener(n=>{"stream-port"===n.name&&n.onMessage.addListener(e=>{"postStream"===e.action&&n.postMessage({action:"streamValue",value:e.value})})}),chrome.runtime.onMessage.addListener((e,n,t)=>{1==e.chooseDesktopMediaFromTab&&(_previous&&chrome.desktopCapture.cancelChooseDesktopMedia(_previous),_previous=chrome.desktopCapture.chooseDesktopMedia(e.sourceType,n.tab,(e,n)=>{chrome.storage.local.set({streamId:e}),chrome.runtime.sendMessage({chooseDesktopMediaResponse:!0,streamId:e,options:n})}))}),chrome.runtime.onMessage.addListener((e,n,t)=>{1==e.getDeviceAssetID&&(chrome.enterprise&&chrome.enterprise.deviceAttributes?chrome.enterprise.deviceAttributes.getDeviceAssetId(function(e){e?chrome.runtime.sendMessage({getDeviceAssetIDResponse:!0,assetId:e}):chrome.runtime.sendMessage({getDeviceAssetIDResponse:!0,assetId:null})}):chrome.runtime.sendMessage({getDeviceAssetIDResponse:!0,assetId:null}))}),chrome.runtime.onMessage.addListener((e,n,t)=>{1==e.getDeviceHostname&&(chrome.enterprise&&chrome.enterprise.deviceAttributes?chrome.enterprise.deviceAttributes.getDeviceHostname(function(e){e?chrome.runtime.sendMessage({getDeviceHostnameResponse:!0,devHostname:e}):chrome.runtime.sendMessage({getDeviceHostnameResponse:!0,devHostname:null})}):chrome.runtime.sendMessage({getDeviceHostnameResponse:!0,devHostname:null}))}),chrome.runtime.onMessage.addListener((e,n,t)=>{1==e.getDeviceSerialNumber&&(chrome.enterprise&&chrome.enterprise.deviceAttributes?chrome.enterprise.deviceAttributes.getDeviceSerialNumber(function(e){e?chrome.runtime.sendMessage({getDeviceSerialNumberResponse:!0,deviceSerial:e}):chrome.runtime.sendMessage({getDeviceSerialNumberResponse:!0,deviceSerial:null})}):chrome.runtime.sendMessage({getDeviceSerialNumberResponse:!0,deviceSerial:null}))}),chrome.runtime.onMessage.addListener((e,n,t)=>{1==e.getHardwarePlatformInfo&&(chrome.enterprise&&chrome.enterprise.hardwarePlatform?chrome.enterprise.hardwarePlatform.getHardwarePlatformInfo(function(e){e?chrome.runtime.sendMessage({getHardwarePlatformInfoResponse:!0,platformInfo:e}):chrome.runtime.sendMessage({getHardwarePlatformInfoResponse:!0,platformInfo:null})}):chrome.runtime.sendMessage({getHardwarePlatformInfoResponse:!0,platformInfo:null}))}),chrome.runtime.onMessage.addListener((e,n,t)=>{1==e.getDeviceAnnotatedLocation&&(chrome.enterprise&&chrome.enterprise.deviceAttributes?chrome.enterprise.deviceAttributes.getDeviceAnnotatedLocation(function(e){e?chrome.runtime.sendMessage({getDeviceAnnotatedLocationResponse:!0,annotatedLocation:e}):chrome.runtime.sendMessage({getDeviceAnnotatedLocationResponse:!0,annotatedLocation:null})}):chrome.runtime.sendMessage({getDeviceAnnotatedLocationResponse:!0,annotatedLocation:null}))}),chrome.runtime.onMessage.addListener((e,n,t)=>{1==e.getDirectoryDeviceId&&(chrome.enterprise&&chrome.enterprise.deviceAttributes?chrome.enterprise.deviceAttributes.getDirectoryDeviceId(function(e){e?chrome.runtime.sendMessage({getDirectoryDeviceIdResponse:!0,devId:e}):chrome.runtime.sendMessage({getDirectoryDeviceIdResponse:!0,devId:null})}):chrome.runtime.sendMessage({getDirectoryDeviceIdResponse:!0,devId:null}))}),chrome.runtime.onMessage.addListener((e,n,t)=>{1==e.getNetworkDetails&&(chrome.enterprise&&chrome.enterprise.networkingAttributes?chrome.enterprise.networkingAttributes.getNetworkDetails(function(e){e?chrome.runtime.sendMessage({getNetworkDetailsResponse:!0,network:e}):chrome.runtime.sendMessage({getNetworkDetailsResponse:!0,network:null})}):chrome.runtime.sendMessage({getNetworkDetailsResponse:!0,network:null}))}),chrome.runtime.onMessage.addListener(function(e,n,t){1==e.makeDesktopCaptureVisible&&chrome.windows.update(n.tab.windowId,{focused:!0})}),setInterval(function(){chrome.storage.local.get("streamId",function(e){chrome.runtime.sendMessage({minimizeDesktopCapture:!0})})},200);